## Bootstrap的发展史

Bootstrap方法是美国斯坦福大学统计学教授Bradley Efron在20世纪70年代创立的一种再抽样的方法。Bootstrap意为靴带，来源于18世纪RE Raspe的冒险故事《巴龙历险记》。主人公巴龙掉入深湖里，在他绝望的时候，灵机一动，想到了用自己的靴带把自己救上来。意志不借助别人的力量，凭自己努力，获得成功。在这里Bootstrap法是指基于原样本自身的数据重复抽样产生新的样本并计算统计量的方法。根据其原意陈峰学者，陆守曾学者将其翻译为“自举法”，也有人将其翻译为“自助法”。


## 基本思想
Bootstrap法是以现有样本为基础的模拟抽样统计推断法，可用于研究一组数据的某统计量的分布特征，特别适用于那些难以用常规方法导出的参数区间估计、假设检验等问题。

Bootstrap的基本思想是：在原始样本的范围内做有放回的再抽样，得到新的样本，样本含量仍为n，抽样的重复次数记为R。原始数据中每个观察单位被抽到的概率相等，为1/n，所得样本称为Bootstrap样本。于是，每个Bootstrap样本就可以得到一个参数估计值，这样重复R次，可以得到参数的1000个估计值。参数Bootstrap估计就是基于这些Bootstrap样本的统计量。

## R语言中的实现

R语言灵活的自定义函数，为计算自定义的统计量提供了很大的方便，所以对于自定义的统计量，R语言中boot包是最好的选择。Bootstrap方法最经典和最为人熟知的就是参数估计，尤其是假设区间的估计。

使用自助法前请确保下载并安装了boot包：install.packages('boot')
自助法过程看起来复杂，但是一看例子就会十分明了。
一般来说，自助法有三个主要步骤。

1. 写一个能返回待研究统计量的函数。如果只有单个统计量（如中位数），函数应该返回一个数值；如果有一列统计量（如一列回归系数），函数应该返回一个向量。
2. 为生成R中自助法所需的有效统计量重复数，使用boot()函数对上面所写的函数进行处理。
3. 使用boot.ci()函数获取第2步生成的统计量的置信区间。

**举例来说：**

以1974年Motor Trend杂志中的mtcars的数据集为例，它包含32量骑车的信息。假设你正使用多重回归根据车重(1b/1000)和发动机排量（立方英寸）来预测每加仑行驶的英里数，除了标准的回归统计量，你还想获得95%的R平方值的置信区间（预测变量对响应变量可解释的方差比），那么便可使用非参数的自助法来获得置信区间。

首先任务是写一个获取R平方值的函数：

rsq \<- function(formula,data,indices){
  d \<- data[indices,] #  从原始样本中再抽样，indices指抽取的行
  fit \<- lm(formula,data=d)
  return(summary(fit)$r.square) # 返回单次抽样的统计量
}

library(boot)
set.seed(20160425) # 便于重复试验结果
results \<- boot(data=mtcars,statistic=rsq,R=1000,formula= mpg\~wt+disp)

boot.ci(results,type='bca') # boot函数中有5种计算统计量置信区间的方法,bca（校正百分位数法）较为准确，默认5中方法都给出，但如果计算量比较大的话，建议选择一种方法。具体每种方法的优劣就不展开讲了，可以查阅相关数据。

## 常被提出的有价值的问题
1.  初始的样本需要多大？
2.  应该重复多少次？

对于第一个问题，我们无法给出简单的回答。有些人认为只要样本能够较好地代表总体，初始样本大小为 20～30 即可得到足够好的结果。从感兴趣的总体随机抽样的方法可信度最高，它能够保证初始样本的代表性。对于第二个问题，我发现1000次重复在大部分情况下都可满足要求。


** 技术难点在于自定义统计量的编写，在后续的文章中将会展开讲诉如何编写函数。



参考书目

1. Rober I. Kabacoff. R in Action.
